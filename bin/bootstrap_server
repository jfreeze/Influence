#!/usr/bin/env ruby

# Pushed the Perl boot server to the remote system and launches it
bootserver = File.join(File.dirname(__FILE__), 'bootserver.pl')

if ARGV.size != 2
  puts "Usage: #{File.basename $PROGRAM_NAME} user host"
  exit
end

user = ARGV[0]
host = ARGV[1]

cmd = %Q{cat #{bootserver} | ssh #{user}@#{host} "perl -"}

system cmd